document.addEventListener('DOMContentLoaded',function(evt){sliderify(document.querySelector('.services'));sliderify(document.querySelector('.promo'));popuppify(document.body,{animation:{fadeInClasses:['animation-fade-in'],fadeOutClasses:['animation-fade-out'],animationDuration:0.1},memorizeFormInputsValues:!0});let uglyRangeBlock=document.querySelector('.form-filter-input-range-ugly');let prettyRangeBlock=document.querySelector('.form-filter-input-range-pretty');if(uglyRangeBlock&&prettyRangeBlock){uglyRangeBlock.classList.toggle('visually-hidden');prettyRangeBlock.classList.toggle('none')}});function popuppify(rootElement=document.body,options={}){const POPUP_ROOT_CLS='js-popuppify-popup';const POPUP_OPEN_CLS='js-popuppify-open';const POPUP_CLOSE_CLS='js-popuppify-close';const POPUP_OVERLAY_CLS='js-popuppify-overlay';const DOT='.';if(!rootElement)
return;const POPUP_OVERLAY=document.querySelector(DOT+POPUP_OVERLAY_CLS)||generateOverlay();const POPUP_OPTIONS=options;let popups=rootElement.querySelectorAll(DOT+POPUP_ROOT_CLS);Array.from(popups).forEach(popup=>registerPopupHandlers(popup));function registerPopupHandlers(popupRoot){if(!popupRoot)
return;registerOpenPopupHandlers(popupRoot);registerClosePopupHandlers(popupRoot);registerPopupFormsHandlers(popupRoot)}
function registerLinkHandler(link,popupRoot){if(!(link&&(link instanceof HTMLAnchorElement||link instanceof HTMLButtonElement)))
return;if(!(link.dataset.jsPopuppifyName))
return;link.addEventListener('click',evt=>{evt.preventDefault();openPopupAndOverlay(popupRoot,POPUP_OVERLAY)})}
function registerCloseButtonHandler(closeBtn){let element=closeBtn;let parent=element;while(!parent.classList.contains(POPUP_ROOT_CLS))
parent=parent.parentNode;closeBtn.addEventListener('click',evt=>{closePopupAndOverlay(parent,POPUP_OVERLAY)})}
function registerEscKeyboardEvent(popupRoot){document.addEventListener('keydown',evt=>{if(!popupRoot.classList.contains('none')){let keycode=(typeof evt.keyCode!='undefined'&&evt.keyCode)?evt.keyCode:evt.which;if(keycode===27){closePopupAndOverlay(popupRoot,POPUP_OVERLAY)}}})}
function closePopupAndOverlay(popupRoot,overlay){if(popupRoot){if(options&&options.animation&&options.animation.fadeOutClasses)
options.animation.fadeOutClasses.forEach(cls=>popupRoot.classList.add(cls));let animationDuration=POPUP_OPTIONS.animation.animationDuration*1000||1000;setTimeout(()=>{popupRoot.classList.add('none')},animationDuration)}
if(overlay){overlay.classList.add('none')}}
function openPopupAndOverlay(popupRoot,overlay){if(popupRoot)
if(options&&options.animation&&options.animation.fadeOutClasses)
options.animation.fadeOutClasses.forEach(cls=>popupRoot.classList.remove(cls));if(options&&options.animation&&options.animation.fadeInClasses)
options.animation.fadeInClasses.forEach(cls=>popupRoot.classList.add(cls));popupRoot.classList.remove('none');if(overlay)
overlay.classList.remove('none')}
function registerClosePopupHandlers(popupRoot){closeButtons=popupRoot.querySelectorAll(DOT+POPUP_CLOSE_CLS);Array.from(closeButtons).forEach(closeBtn=>registerCloseButtonHandler(closeBtn));registerEscKeyboardEvent(popupRoot)}
function registerOpenPopupHandlers(popupRoot){let dataAttr=popupRoot.dataset.jsPopuppifyName;if(dataAttr)
Array.from(document.querySelectorAll(DOT+POPUP_OPEN_CLS)).filter(link=>link.dataset.jsPopuppifyName==dataAttr).forEach(link=>registerLinkHandler(link,popupRoot))}
function registerPopupFormsHandlers(popupRoot){if(!(POPUP_OPTIONS&&POPUP_OPTIONS.memorizeFormInputsValues))
return;let forms=findForms(popupRoot);if(!forms.length)
return;forms.forEach(form=>{formMemorizeInputValuesInLocalStorage(form);addAttributesChangeObsever(popupRoot);changeOnSubmitBehaviour(form,popupRoot)});function changeOnSubmitBehaviour(form,popupRoot){form.addEventListener('submit',evt=>{evt.preventDefault();fetchStub().then(response=>{console.log(response);flushFormControlsAndLocalStorageValues(form)})})}
function addAttributesChangeObsever(popupRoot){let observer=new MutationObserver(function(mutations){let mutationsArray=Array.from(mutations).filter(mutation=>mutation.type=='attributes'&&mutation.attributeName=="class"&&!mutation.target.classList.contains('none')&&mutation.target.getBoundingClientRect().height==0);if(!mutationsArray.length){forms.forEach(form=>restoreControlsValuesFromLocalStorage(form))}});let config={attributes:!0,childList:!1,characterData:!1};observer.observe(popupRoot,config)}
function formMemorizeInputValuesInLocalStorage(form){if(!localStorage)
return;let controls=searchInputControls(form);if(!controls.length)
return;if(!form.Utils)
initializeIdsGenerator(form);controls.forEach(control=>{checkGenerateId(control);control.addEventListener('change',evt=>{localStorage.setItem(evt.target.id,evt.target.value)})});function checkGenerateId(control){if(!control.id)
control.id=form.Utils.text.getRandomStrStrict(20)}
function initializeIdsGenerator(root){var _data={};_data.symbols={};var module={};module.text={getRandomHex:function(){return(Math.floor(Math.random()*0x100000)%0x10000).toString(16)},getRandomHexFixed:function(){let _temp=this.getRandomHex();let _zeros=4-_temp.length;for(let i=0;i<_zeros;i++)
_temp="0"+_temp;return _temp},getUnicodeSymbol:function(){return String.fromCharCode(this.getRandomHexFixed())},satisfyRestrictions:function(symb,regex=/[a-zA-Z0-9_]/){return symb?regex.test(symb):!1},satisfyRestrictionsStrict:function(str,regexes=[/[a-z]/,/[A-Z]/,/[0-9]/,/\_/]){return regexes.reduce((prev,curr,inx)=>{return prev&&curr.test(str)},!0)},getUnicodeSymbolNoRepeats:function(){let current;do{current=this.getUnicodeSymbol()}
while(current==_data.symbols.last);_data.symbols.last=current;return current},getUnicodeSymbolNoRepeatsFiltered:function(filterRegex){let current;do{current=this.getUnicodeSymbol()}
while(!this.satisfyRestrictions(current,filterRegex)||current==_data.symbols.last);_data.symbols.last=current;return current},getRandomStr:function(len){if(!len)return;let result=[];while(len--){result.push(this.getUnicodeSymbolNoRepeatsFiltered())}
return result.join('')},getRandomStrStrict:function(len){if(!len)return;let result="";do{result=this.getRandomStr(len)}
while(!this.satisfyRestrictionsStrict(result));return result},boldify:function(text){return'<b>'+text+'</b>'}};if(!root.Utils)
root.Utils=module}}
function restoreControlsValuesFromLocalStorage(form){if(!localStorage)
return;let controls=searchInputControls(form);if(!controls.length)
return;controls.forEach(control=>{control.value=localStorage.getItem(control.id)})}
function flushFormControlsAndLocalStorageValues(form){if(!localStorage)
return;let controls=searchInputControls(form);if(!controls.length)
return;controls.forEach(control=>{control.value='';localStorage.setItem(control.id,control.value)})}
function searchInputControls(form){return Array.from(form.elements).filter(element=>!(element.attributes.type&&element.attributes.type.nodeValue=='submit'))}
function getJsonDataFromInputControls(form){let result;let controls=searchInputControls(form);if(!controls.length)
return;controls.forEach(control=>{})}}
function generateOverlay(){}
function findForms(rootElement){return Array.from(rootElement.querySelectorAll('form'))}}
function sliderify(sliderContainer){const SLIDER_CONTAINER_CLS_NAME='js-sliderify-slider';const SLIDER_CONTROL_CLS_NAME='js-sliderify-control';const SLIDER_SLIDE_CLS_NAME='js-sliderify-slide';const DOT='.';const ACTIVE_STATE='_active';if(!(sliderContainer&&sliderContainer instanceof(HTMLElement)&&sliderContainer.classList.contains(SLIDER_CONTAINER_CLS_NAME)))
return;const CONTROLS=sliderContainer.querySelectorAll(DOT+SLIDER_CONTROL_CLS_NAME);if(!CONTROLS.length)
return;const SLIDES=sliderContainer.querySelectorAll(DOT+SLIDER_SLIDE_CLS_NAME);if(!SLIDES.length)
return;registerControlsHandlers(CONTROLS);function registerControlsHandlers(controls,evtName='click'){Array.from(controls).forEach(control=>{registerControlHandler(control,evtName)})}
function registerControlHandler(control,evtName){control.addEventListener(evtName,(evt)=>{evt.preventDefault();let result=findRootClassPrefixForElement(control,sliderContainer);if(!result)
return;let activeItem=result.element;if(activeItem.classList.contains(result.prefixedClass+ACTIVE_STATE))
return;let controlContainersAndSlides=Array.from(sliderContainer.querySelectorAll(DOT+result.prefixedClass)).concat(...Array.from(SLIDES));removeActiveState(controlContainersAndSlides);activeItem.classList.add(result.prefixedClass+ACTIVE_STATE);let activeItemPosition=findElementSequenceNumber(activeItem,result.prefixedClass);let activeSlide=SLIDES.item(activeItemPosition);activeSlideClass=findRootClassPrefixForElement(activeSlide,sliderContainer).prefixedClass;activeSlide.classList.add(activeSlideClass+ACTIVE_STATE)})}
function findElementSequenceNumber(element,inactiveClassName){let array=Array.from(element.parentElement.querySelectorAll(DOT+inactiveClassName));for(let index=0;index<array.length;index++){if(element==array[index])
return index}
return}
function findRootClassPrefixForElement(element,root,delimiter='-'){let possiblePrefixes=Array.from(root.classList).filter(element=>element!=SLIDER_CONTAINER_CLS_NAME);let current=element;do{let clsList=filterClassListByRegex(element.classList,possiblePrefixes[0]+delimiter)
if(clsList.length){return{element:element,prefixedClass:clsList[0]}}
element=element.parentNode}
while(element!=root);return null}
function removeActiveState(elements){for(const element of elements){let activeClasses=filterClassListByRegex(element.classList,ACTIVE_STATE);if(activeClasses.length){for(const activeClass of activeClasses){element.classList.remove(activeClass)}}}}
function filterClassListByRegex(clsList,regexString){let regex=new RegExp(regexString);return Array.from(clsList).filter(cls=>regex.test(cls))}}
function gMapsInitialize(selector='.popup-map-container'){findMapContainers(selector).forEach(mapContainer=>{let mskPosition={lat:55.687126,lng:37.529640};let gMap=new google.maps.Map(mapContainer,{center:mskPosition,zoom:17,zoomControl:!1,streetViewControl:!1,fullscreenControl:!1});let marker=new google.maps.Marker({position:mskPosition,map:gMap})});function findMapContainers(selector){return Array.from(document.querySelectorAll(selector))}
function findAndHideImages(root){let gmapsFallbackImages=root.querySelectorAll('img');Array.from(gmapsFallbackImages).forEach(img=>img.style.display='none')}}
function fetchStub(){return new Promise((resolve,reject)=>{setTimeout(()=>{resolve()},5000)})}